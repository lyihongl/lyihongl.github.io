/*! For license information please see main.838b03522971bd715be8.bundle.js.LICENSE.txt */
(()=>{var t,e={485:(t,e,s)=>{"use strict";s(260);class i extends Phaser.GameObjects.Text{constructor(t,e,s,i,a,h){super(t,e,s,i,a),this.setInteractive({useHandCursor:!0}).on("pointerover",(()=>this.enterButtonHoverState())).on("pointerout",(()=>this.enterButtonRestState())).on("pointerdown",(()=>this.enterButtonActiveState())).on("pointerup",(()=>{this.enterButtonHoverState(),h()}))}enterButtonHoverState(){this.setStyle({fill:"#fff"})}enterButtonRestState(){this.setStyle({fill:"#4b5cb8"})}enterButtonActiveState(){this.setStyle({fill:"#fff"})}}class a extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.svg("capy","assets/img/Capy2.svg",{width:128,height:128}),this.load.svg("peli","assets/img/peli.svg",{width:64,height:64}),this.load.svg("basicChomp1","assets/img/BasicChomp1-1.svg",{width:128,height:64}),this.load.svg("basicChomp2","assets/img/BasicChomp1-2.svg",{width:128,height:64}),this.load.svg("orange","assets/img/orange.svg",{width:32,height:32}),this.load.image("phaser-logo","assets/img/phaser-logo.png")}create(){const t=new i(this,100,100,"Start Game",{fontSize:"32px",fontStyle:"bold",fill:"#4b5cb8"},(()=>{this.scene.start("MainScene")}));this.add.existing(t)}}class h extends Phaser.GameObjects.Container{constructor(t,e){super(t,e.x,e.y),this.visible=!1}}class r extends h{constructor(t,e,s){super(t,e),this.sprite1=t.add.sprite(e.x+65,e.y+10,"basicChomp1"),this.sprite2=t.add.sprite(e.x+60,e.y-10,"basicChomp2"),this.sprite1.setOrigin(0,1),this.sprite2.setOrigin(0,0),this.scene=t,this.damage=s,t.physics.add.existing(this),this.add([this.sprite1,this.sprite2]),this._body=this.body,this._body.setSize(this.sprite1.width,128),this.sprite1.setRotation(.1),this.sprite2.setRotation(-.1)}attack(){this.visible=!0,this.sprite1.setRotation(-.5),this.sprite2.setRotation(.3),this.sprite1.alpha=1,this.sprite2.alpha=1,this.scene.time.addEvent({callback:()=>{const t=this.scene.registry.get("enemys");this.scene.physics.overlap(this,t,((t,e)=>{e.knockback(this.damage)}))},delay:20,loop:!1}),this.scene.time.addEvent({callback:()=>{this.visible=!1},delay:200,loop:!1})}update(){this.visible&&(this.sprite1.angle+=2.2,this.sprite2.angle-=2.2,this.sprite1.alpha-=.06,this.sprite2.alpha-=.06),-1===this.parentContainer.scaleX?this._body.setOffset(-192,-64):this._body.setOffset(64,-64)}}class n extends Phaser.Physics.Arcade.Sprite{constructor(t,e){super(t,e.x+100,e.y,"capy"),this.visible=!0,this.player=e,this.scene=t,this.playAnim=!1,this.attackTimer=Date.now()}attack(){this.scene.registry.get("enemys"),this.attackTimer=Date.now(),this.visible=!0,this.scene.time.addEvent({callback:()=>{this.visible=!1},delay:300,loop:!1})}update(){this.setRotation((Date.now()-this.attackTimer)/1e3)}}class o extends Phaser.GameObjects.Container{constructor(t,e,s,i,a,h){super(t,e,s),this.scene=t,this.x=e,this.y=s,this.max=i,this.w=a,this.h=h,this.rect1=t.add.rectangle(e,s,a,h,2271778),this.rect2=t.add.rectangle(e+a/2,s,0,h,11149858),this.rect2.setOrigin(1,.5),t.add.existing(this),this.add([this.rect1,this.rect2])}update(t){const e=1-t/this.max;this.rect2.setOrigin(0,0),this.rect2.width=Math.min(e*this.w,this.w),this.rect2.setOrigin(1,.5)}}class c extends Phaser.GameObjects.Container{constructor(t,e,s){super(t,0,0),t.physics.add.existing(this),this._body=this.body,t.add.existing(this),this.weapon=new r(t,this,255),this.sprite=t.physics.add.sprite(0,0,"capy"),this.sprite.body.setSize(this.sprite.width,50),this.hpBar=new o(t,0,30,1e3,this.sprite.width,20),this.add([this.sprite,this.weapon,this.hpBar]),this.currentHp=1e3,this._body.setSize(this.width,50),this.runningTween=null,this.keys=t.input.keyboard.addKeys("W,A,S,D"),this.attack=t.time.addEvent({callback:()=>this.weapon.attack(),delay:700,loop:!0})}takeDamage(t){this.currentHp-=t,this.hpBar.update(this.currentHp),null===this.runningTween&&(this.runningTween=this.scene.tweens.add({targets:this.sprite,scaleX:.5*this.scaleX,scaleY:1.1,alpha:0,duration:50,yoyo:!0,repeat:0}),this.runningTween.on("complete",(()=>{this.runningTween=null})))}update(){this._body.setVelocity(0),this.weapon.update(),this.keys.A.isDown?(this.scaleX=-1,this.hpBar.scaleX=-1,this._body.setVelocityX(-300)):this.keys.D.isDown&&(this.scaleX=1,this.hpBar.scaleX=1,this._body.setVelocityX(300)),this.keys.W.isDown?this._body.setVelocityY(-300):this.keys.S.isDown&&this._body.setVelocityY(300)}}class l extends Phaser.GameObjects.Text{constructor(t,e,s,i,a,h){super(t,e,s,i,{fontSize:"20px",fontFamily:"Arial",fontStyle:"bold",color:"#b80f36"}),this.parent=h,this.scene=t,t.add.existing(this),this.visible=!1}activate(t){this.setText(t),this.x=this.parent.x,this.y=this.parent.y,this.visible=!0,this.scene.time.addEvent({callback:()=>{this.visible=!1},delay:400,loop:!1}),this.scene.tweens.add({targets:this,y:this.y-40,x:this.x+70*(Math.random()-.5),alpha:.5,ease:"Sine.easOut",duration:400,yoyo:!1,repeat:0})}}class p extends Phaser.Physics.Arcade.Sprite{constructor(t,e,s,i,a){super(t,e,s,"peli"),t.physics.add.existing(this),t.add.existing(this),this.speed=i,this.health=a,this.state="normal",this.dmgTxt=new l(this.scene,this.x,this.y,"",{fontFamily:'Georgia, "Goudy Bookletter 1911", Times, serif'},this),this.player=this.scene.registry.get("player"),this.lastAttackTime=Date.now()}cleanUp(){}knockback(t){this.dmgTxt.activate(t.toString());const e=this.scene.registry.get("player").x,s=this.scene.registry.get("player").y,i=new Phaser.Math.Vector2(e-this.x,s-this.y).normalize();this.health-=t,this.scene.tweens.add({targets:this,angle:30,scaleX:.5,scaleY:1.1,alpha:0,duration:50,yoyo:!0,repeat:0}),Phaser.Math.FloatBetween(0,1)<.7&&(this.state="kb",this.setVelocityX(400*-i.x),this.setVelocityY(400*-i.y),this.scene.time.addEvent({callback:()=>{this.state="normal"},delay:75,loop:!1}))}attack(){this.scene.physics.overlap(this,this.player.sprite,((t,e)=>{this.player.takeDamage(50),this.lastAttackTime=Date.now()}))}update(){if(Date.now()-this.lastAttackTime>1e3&&this.attack(),"normal"===this.state){const t=this.scene.registry.get("player").x,e=this.scene.registry.get("player").y,s=new Phaser.Math.Vector2(t-this.x,e-this.y).normalize();s.x>0?this.flipX=!1:this.flipX=!0,this.setVelocityX(s.x*this.speed),this.setVelocityY(s.y*this.speed)}}}class d extends Phaser.Physics.Arcade.Sprite{constructor(t,e,s){super(t,e,s,"orange"),t.add.existing(this),t.physics.add.existing(this),this.scene=t,this.x=e,this.y=s,this.Gconst=10}update(){const t=this.scene.registry.get("player").x,e=this.scene.registry.get("player").y,s=Phaser.Math.Distance.Between(t,e,this.x,this.y),i=this.Gconst/s,a=new Phaser.Math.Vector2(t-this.x,e-this.y).scale(40*i);this.setVelocityX(a.x),this.setVelocityY(a.y)}}class y extends Phaser.Scene{constructor(){super({key:"MainScene"})}create(){this.oranges=0,this.game.canvas.oncontextmenu=t=>{t.preventDefault()},this.player=new c(this,400,400),this.registry.set("player",this.player),this.registry.set("weaponsGroup",this.weapons),this.cameras.main.startFollow(this.player),this.enemys=this.physics.add.group(),this.registry.set("enemys",this.enemys),this.expParticles=this.physics.add.group(),((t,e,s)=>{for(let i=0;i<40;i++)e.add(new p(t,s.x+400,s.y+50*i,50,750))})(this,this.enemys,this.cameras.main),this.weapons=this.physics.add.group(),this.weapons.add(this.player.weapon),this.add.text(this.cameras.main.width-15,15,`Phaser v${Phaser.VERSION}`,{color:"#000000",fontSize:"24px"}).setOrigin(1,0).setScrollFactor(0,0)}update(){this.player.update(),this.player.currentHp<=0&&this.scene.start("endScreen");for(let t=0;t<this.enemys.children.entries.length;t++){const e=this.enemys.children.entries[t];e.update(),e.health<=0&&(this.expParticles.add(new d(this,e.x,e.y)),this.enemys.remove(e),e.cleanUp(),e.destroy())}for(let t=0;t<this.expParticles.children.entries.length;t++)this.expParticles.children.entries[t].update();this.physics.overlap(this.player,this.expParticles,((t,e)=>{this.oranges++,console.log(this.oranges),e.destroy()}))}}class g extends Phaser.Scene{constructor(){super({key:"endScreen"})}preload(){}create(){this.add.text(100,100,"Game Over",{fontSize:"32px",fontStyle:"bold",color:"#4b5cb8"});const t=new i(this,100,200,"Play Again",{fontSize:"32px",fontStyle:"bold",fill:"#4b5cb8"},(()=>{this.scene.start("MainScene")}));this.add.existing(t)}}const u={type:Phaser.AUTO,backgroundColor:"#b8e6f2",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[a,y,g],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:0}}}};window.addEventListener("load",(()=>{new Phaser.Game(u)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var h=s[t]={exports:{}};return e[t].call(h.exports,h,h.exports,i),h.exports}i.m=e,t=[],i.O=(e,s,a,h)=>{if(!s){var r=1/0;for(l=0;l<t.length;l++){for(var[s,a,h]=t[l],n=!0,o=0;o<s.length;o++)(!1&h||r>=h)&&Object.keys(i.O).every((t=>i.O[t](s[o])))?s.splice(o--,1):(n=!1,h<r&&(r=h));if(n){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}h=h||0;for(var l=t.length;l>0&&t[l-1][2]>h;l--)t[l]=t[l-1];t[l]=[s,a,h]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,h,[r,n,o]=s,c=0;if(r.some((e=>0!==t[e]))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(o)var l=o(i)}for(e&&e(s);c<r.length;c++)h=r[c],i.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return i.O(l)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),i.O(void 0,[216],(()=>i(485)));var a=i.O(void 0,[216],(()=>i(204)));a=i.O(a)})();